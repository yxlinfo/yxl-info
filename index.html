  <!-- Footer ... -->
  </main>

  <!-- ✅ (여기부터) BGM 블록을 body 안으로 이동 -->
  <audio id="bgm" src="assets/bgm.mp3" preload="auto" loop></audio>

  <div id="bgmOverlay" style="
    position:fixed; inset:0; z-index:9999;
    display:flex; align-items:center; justify-content:center;
    background:rgba(0,0,0,.70);
    backdrop-filter: blur(6px);
  ">
    <button id="bgmStartBtn" type="button" style="
      padding:14px 18px; border-radius:16px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.12);
      color:#fff; font-size:16px; cursor:pointer;
    ">▶ 터치해서 음악 재생</button>
  </div>

  <button id="bgmToggle" type="button" style="
    position:fixed; right:16px; bottom:16px; z-index:9998;
    padding:10px 14px; border-radius:12px;
    border:1px solid rgba(255,255,255,.25);
    background:rgba(0,0,0,.55); color:#fff; cursor:pointer;
    display:none;
  ">⏸ 음악</button>

  <script>
  (() => {
    const audio   = document.getElementById('bgm');
    const overlay = document.getElementById('bgmOverlay');
    const startBtn= document.getElementById('bgmStartBtn');
    const toggle  = document.getElementById('bgmToggle');

    audio.volume = 0.25;
    const KEY = 'yxl_bgm_enabled';

const showOverlay = () => overlay.style.display = 'flex';

const hideOverlay = () => {
  overlay.style.display = 'none';
  overlay.remove();
};

    };

    const start = async () => {
      try {
        await audio.play();
        localStorage.setItem(KEY, '1');
        hideOverlay();
        setTogglePlaying(true);
      } catch (e) {
        showOverlay();
      }
    };

    const enabled = localStorage.getItem(KEY) === '1';
    if (enabled) {
      hideOverlay();
      window.addEventListener('pointerdown', start, { once: true });
      window.addEventListener('keydown', start, { once: true });
      setTogglePlaying(false);
    } else {
      showOverlay();
    }

    startBtn.addEventListener('click', start);
    overlay.addEventListener('pointerdown', (e) => { if (e.target === overlay) start(); });

    toggle.addEventListener('click', async () => {
      if (audio.paused) await start();
      else { audio.pause(); setTogglePlaying(false); }
    });
  })();
  </script>
  <!-- ✅ (여기까지) BGM 블록 -->

  <script src="app.js"></script>
</body>
</html>

